import{Q,a as H,b as L}from"./QSelect.2d0396a0.js";import{Q as Y,a as $}from"./QToolbar.81f2660b.js";import{a as j,f as g,g as O,A as z,r as b,_ as R,a2 as i,a3 as a,a7 as s,ac as p,a8 as t,a9 as d,aH as U,B as A,ag as C,ah as V,ai as k,aa as x,y as _,z as G,ak as y,af as T}from"./index.7d081dc2.js";import{a as q,Q as B}from"./QTable.d63ad7a9.js";import{Q as m,d as J}from"./date.22f391c2.js";import{e as K,f as W,Q as D,b as M}from"./format.a151a50b.js";import{Q as X}from"./QPage.7fcd64c2.js";import{C as I}from"./ClosePopup.8aebdd8f.js";import{api as Z}from"./axios.f80c9d8b.js";var v=j({name:"QTr",props:{props:Object,noHover:Boolean},setup(r,{slots:h}){const c=g(()=>"q-tr"+(r.props===void 0||r.props.header===!0?"":" "+r.props.__trClass)+(r.noHover===!0?" q-tr--no-hover":""));return()=>O("tr",{class:c.value},z(h.default))}});const ee={class:"row items-center q-gutter-sm q-mb-md"},ae={class:"q-pa-md"},te={class:"col-grow flex row justify-end q-gutter-xs"},ue={__name:"historialVentasDiaPage",setup(r){const c=[{name:"nombre_cliente",label:"Nombre Cliente",align:"left",field:l=>l.dataCliente.nombre_cliente,sortable:!0},{name:"documento_cliente",label:"Documento Cliente",align:"left",field:l=>l.dataCliente.documento_cliente,sortable:!0},{name:"nombre_usuario",label:"Nombre Vendedor",align:"left",field:l=>l.dataVendedor.nombre_usuario,sortable:!0},{name:"fecha_venta",label:"Fecha Venta Medicamentos",align:"left",field:"fecha_venta",sortable:!0,format:l=>J.formatDate(l,"YYYY-MM-DD")}],F=[{name:"codigo",label:"Codigo Medicamento",align:"left",field:"codigo",sortable:!0},{name:"nombre_medicamento",label:"Medicamento",align:"left",field:"nombre_medicamento",sortable:!0},{name:"fabricante",label:"Fabricante",align:"left",field:"fabricante",sortable:!0},{name:"fecha_vencimiento",label:"Fecha Vencimiento",align:"left",field:"fecha_vencimiento",sortable:!0},{name:"cantidad",label:"Cantidad",align:"right",field:"cantidad",sortable:!0},{name:"precio",label:"Precio",align:"right",field:"precio",sortable:!0},{name:"total",label:"Total Compra",align:"right",field:"total",sortable:!0},{name:"opciones",label:"Opciones",align:"center",field:"opciones",sortable:!0}],w=b([]);R(async()=>{await S()});const S=async()=>{var l,n;try{const{data:e}=await Z.get("ventas/");console.log(e),w.value=e}catch(e){console.warn((n=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:n.message)}},u=b(["nombre_cliente","documento_cliente","nombre_usuario","fecha_venta"]),N=g(()=>c.filter(l=>u.value.includes(l.name))),f=b(""),P=g(()=>{const l=f.value.toLowerCase();return w.value.filter(n=>Object.values(n).some(e=>String(e).toLowerCase().includes(l)))});return(l,n)=>(s(),i(X,{padding:""},{default:a(()=>[p("div",ee,[t(H,null,{default:a(()=>[t(Q,{label:"Ventas"}),t(Q,{label:"Pagina de Ventas de Medicamentos"})]),_:1})]),p("div",ae,[t(B,{flat:"",bordered:"",title:"Historial de Ventas",rows:P.value,columns:N.value,"row-key":"_id",class:"headerTable",dense:""},{top:a(()=>[t(Y,null,{default:a(()=>[t($,{class:"text-light-blue-10 text-h6 gt-xs"},{default:a(()=>[d(" Consulta e Inventario ")]),_:1}),p("div",te,[t(U,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=e=>f.value=e),outlined:"",dense:"",label:"Buscar",class:"col-xs-12 col-sm-3 col-md-3"},{append:a(()=>[t(A,{name:"search"})]),_:1},8,["modelValue"]),t(L,{modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=e=>u.value=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":l.$q.lang.table.columns,"emit-value":"","map-options":"",options:c,"option-value":"name",class:"q-ml-sm col-xs-12 col-sm-3 col-md-3"},null,8,["modelValue","display-value"])])]),_:1})]),header:a(e=>[t(v,{props:e},{default:a(()=>[t(q,{"auto-width":""}),(s(!0),C(k,null,V(e.cols,o=>(s(),i(q,{key:o.name,props:e},{default:a(()=>[d(T(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(e=>[t(v,{props:e},{default:a(()=>[t(m,{"auto-width":""},{default:a(()=>[t(x,{size:"sm",color:"accent",round:"",dense:"",onClick:o=>e.expand=!e.expand,icon:e.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024),(s(!0),C(k,null,V(e.cols,o=>(s(),i(m,{key:o.name,props:e},{default:a(()=>[d(T(o.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),_(t(v,{props:e},{default:a(()=>[t(m,{colspan:"100%"},{default:a(()=>[t(B,{rows:e.row.itemsVentas,columns:F,flat:"",dense:"","row-key":"codigo"},{"body-cell-opciones":a(o=>[t(m,{props:o},{default:a(()=>[t(x,{dense:"",flat:"",round:"",color:"primary",icon:"las la-ellipsis-v"},{default:a(()=>[t(K,{"transition-show":"scale","transition-hide":"scale"},{default:a(()=>[t(W,{dense:""},{default:a(()=>[_((s(),i(D,{clickable:"",onClick:E=>l.editItem(o.row)},{default:a(()=>[t(M,{class:"q-mx-sm"},{default:a(()=>[d("Editar")]),_:1})]),_:2},1032,["onClick"])),[[y],[I]]),_((s(),i(D,{clickable:"",onClick:E=>l.deleteItem(o.row.notdtope,o.row.notdtdoc,o.row.notdnume,o.row.notdcons)},{default:a(()=>[t(M,{class:"q-mx-sm"},{default:a(()=>[d("Eliminar")]),_:1})]),_:2},1032,["onClick"])),[[y],[I]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["rows"])]),_:2},1024)]),_:2},1032,["props"]),[[G,e.expand]])]),_:1},8,["rows","columns"])])]),_:1}))}};export{ue as default};
